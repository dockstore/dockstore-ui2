<hr />
<div *ngFor="let row of accountsInfo">
  <mat-card class="mb-2">
    <div>
      <h4>
        <mat-chip-list>
          <mat-chip *ngIf="row.isLinked" color="accent" selected matTooltip="Account is linked" [matTooltipShowDelay]="1000">
            <mat-icon>link</mat-icon>
          </mat-chip>
          {{ row.name }} Account&nbsp;
          <span *ngIf="row.isLinked">
            <button class="btn btn-secondary btn-xs" (click)="row.show = !row.show">
              <span *ngIf="row.show" class="glyphicon glyphicon-eye-close"></span>
              <span *ngIf="!row.show" class="glyphicon glyphicon-eye-open"></span>
            </button>
            <span class="form-inline" *ngIf="row.show">
              <span class="input-group">
                <!-- TODO: Only have 1 pipe here -->
                <span class="form-control input-xs">{{row.source | getTokenContent: tokens}}</span>
                <span class="input-group-btn">
                  <button class="btn btn-default btn-xs" type="button" ngxClipboard [cbContent]="row.source | getTokenContent: tokens" (cbOnSuccess)="isCopied1 = true">
                    <span class="glyphicon glyphicon-copy"></span>
                  </button>
                </span>
              </span>
            </span>
          </span>
        </mat-chip-list>
      </h4>
    </div>
    <div>
      <strong>{{ row.bold }} </strong> {{ row.message }}
    </div>
    <mat-card-footer class="clearfix">
      <span *ngIf="row.isLinked; else notLinked" class="pull-right">
        <span class="mr-2">Username: {{row.source | getTokenUsername: tokens}}</span>
        <button mat-raised-button color="primary" [attr.id]="'unlink-' + row.name" (click)="unlink(row.source)" matTooltip="Unlink the account" [matTooltipShowDelay]="1000">
          <mat-icon>link_off</mat-icon>
          <span>Unlink Account</span>
        </button>
      </span>
      <ng-template #notLinked>
        <button mat-raised-button color="secondary" class="pull-right" [attr.id]="'link-' + row.name" *ngIf="!row.isLinked" (click)="link(row.source)" matTooltip="Link the account" [matTooltipShowDelay]="1000">
            <mat-icon>link</mat-icon>
          <span>Link Account</span>
        </button>
      </ng-template>
    </mat-card-footer>
  </mat-card>
</div>
