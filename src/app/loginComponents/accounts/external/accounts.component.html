<hr />
<div *ngFor="let row of accountsInfo">
  <mat-card class="mb-2">
    <div>
      <h4>{{ row.name }} Account
        <span *ngIf="row.isLinked">
          <span class="label label-success">
            <span class="glyphicon glyphicon-link"></span>
            <span>Linked</span>
          </span>
          <button class="btn btn-secondary btn-xs" (click)="row.show = !row.show">
            <span *ngIf="row.show" class="glyphicon glyphicon-eye-close"></span>
            <span *ngIf="!row.show" class="glyphicon glyphicon-eye-open"></span>
          </button>
          <span class="form-inline" *ngIf="row.show">
            <span class="input-group">
              <!-- TODO: Only have 1 pipe here -->
              <span class="form-control input-xs">{{row.source | getTokenContent: tokens}}</span>
              <span class="input-group-btn">
                <button class="btn btn-default btn-xs" type="button" ngxClipboard [cbContent]="row.source | getTokenContent: tokens" (cbOnSuccess)="isCopied1 = true">
                  <span class="glyphicon glyphicon-copy"></span>
                </button>
              </span>
            </span>
          </span>
        </span>
      </h4>
    </div>
    <div>
      <strong>{{ row.bold }} </strong> {{ row.message }}
    </div>
    <mat-card-actions class="clearfix">
      <div *ngIf="row.isLinked; else notLinked" class="pull-right">
        <p>Username: {{row.source | getTokenUsername: tokens}}</p>
        <button mat-raised-button color="primary" [attr.id]="'unlink-' + row.name" (click)="unlink(row.source)">
          <mat-icon>link_off</mat-icon>
          <span>Unlink Account</span>
        </button>
      </div>
      <ng-template #notLinked>
        <button mat-raised-button color="secondary" class="pull-right" [attr.id]="'link-' + row.name" *ngIf="!row.isLinked" (click)="link(row.source)">
            <mat-icon>link</mat-icon>
          <span>Link Account</span>
        </button>
      </ng-template>
    </mat-card-actions>
  </mat-card>
</div>
