<p *ngIf="showText">
  Your current username is <strong>{{user?.username}}</strong>. It may have been auto-generated when you initially created a Dockstore account.
  You can update your username only if you meet certain conditions.
</p>

<p>You <strong>can<span *ngIf="!extendedUser?.canChangeUsername">'t</span></strong> change your username.</p>

<div class="alert alert-warning" role="alert" *ngIf="showEmailWarning">
  <strong>Warning!</strong> Your username seems to be an email. We recommend changing your username to something else so that your email is
  not picked up by a spambot. The @ symbol is not allowed in a username, so note that once you change your username you cannot
  change it back to your email.
</div>

<div class="change-username-form">
  <mat-form-field>
    <!-- TODO: Change to formInputDebounceTime -->
    <input matInput placeholder="Username" name="username" [(value)]="username" (keyup)="checkIfUsernameExists($event)" id="username">
  </mat-form-field>
  <span class="change-username-form-buttons">
    <button mat-raised-button color="primary" id="updateUsername" [disabled]="!usernameNotTaken || !usernameMeetsRequirements || !extendedUser?.canChangeUsername" (click)="updateUsername()">Update Username</button>

    <span *ngIf="extendedUser?.canChangeUsername">
      <span *ngIf="!checkingIfValid">
        <span *ngIf="usernameNotTaken && usernameMeetsRequirements" class="vertical-center">
          <mat-icon style="color: green">check</mat-icon>&nbsp;Username available
        </span>
        <span *ngIf="!usernameNotTaken || !usernameMeetsRequirements" class="vertical-center">
          <mat-icon style="color: red">clear</mat-icon>&nbsp;Username not available
        </span>
      </span>
      <span *ngIf="checkingIfValid" class="vertical-center">
        <mat-spinner diameter="24"></mat-spinner>
      </span>
    </span>
  </span>
</div>
