<!-- Button trigger modal -->
<!-- (click)="setEditTagObj(versionTag)"-->
<a href data-toggle="modal" [attr.data-target]="'#' + version.id" *ngIf="editMode" (click)="setMode('View')">
    View
</a>
<a href data-toggle="modal" [attr.data-target]="'#' + version.id" *ngIf="editMode" (click)="setMode('Edit')">
    Edit
</a>
<!-- Modal -->
<div class="modal fade" id="{{version.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">{{mode}} Version Tag</h4>
            </div>
            <form class="form-horizontal" name="tagEditorForm">
                <div class="modal-body">
                    <div class="form-group form-group-sm">
                        <label class="col-sm-3 control-label">
                            Version Tag:
                        </label>
                        <div class="col-sm-9">
                            <input id="versionTagInput" type="text" class="form-control" name="name" [(ngModel)]="version.name" ng-maxlength="128" ng-pattern="/^[a-zA-Z0-9]+([-_\.][a-zA-Z0-9]+)*$/i" required title="Docker Image tag name." placeholder="e.g. develop" [disabled]="!(mode=='Add')" />
                            <div class="form-error-messages" ng-messages="tagEditorForm.name.$error" ng-if="tagEditorForm.name.$touched">
                                <div ng-messages-include="templates/validation/tags/name.html">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group form-group-sm">
                        <label class="col-sm-3 control-label">
                            Git Reference:
                        </label>
                        <div class="col-sm-9">
                            <input id="gitReferenceInput" type="text" class="form-control" name="reference" [(ngModel)]="version.reference" ng-minlength="3" ng-maxlength="128" ng-pattern="/^[\w-]+((\/|\.)[\w-]+)*$/i" title="Git branch or tag name." placeholder="e.g. develop" [disabled]="!editMode || (editMode && version.automated)" />
                            <div class="form-error-messages" ng-messages="tagEditorForm.reference.$error" ng-if="tagEditorForm.reference.$touched">
                                <div ng-messages-include="templates/validation/tags/reference.html">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group form-group-sm">
                        <label class="col-sm-3 control-label">
                            Image ID:
                        </label>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" name="image_id" [(ngModel)]="version.image_id" ng-minlength="3" ng-maxlength="128" ng-pattern="/^[a-zA-Z0-9]*$/i" title="Docker Image ID." placeholder="e.g. 28d30887157514b6047c9" [disabled]="true" />
                            <div class="form-error-messages" ng-messages="tagEditorForm.image_id.$error" ng-if="tagEditorForm.image_id.$touched">
                                <div ng-messages-include="templates/validation/tags/imageid.html">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group form-group-sm">
                        <label class="col-sm-3 control-label">
                            Dockerfile:
                        </label>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" name="dockerfile_path" [(ngModel)]="version.dockerfile_path" ng-minlength="3" ng-maxlength="128" ng-pattern="/^\/([^\\\/\?\:\*\|\<\>]+\/)*Dockerfile$/i" required title="Relative path to the Dockerfile in the Git repository." placeholder="e.g. /Dockerfile" [disabled]="!editMode" />
                            <div class="form-error-messages" ng-messages="tagEditorForm.dockerfile_path.$error" ng-if="tagEditorForm.dockerfile_path.$touched">
                                <div ng-messages-include="templates/validation/tags/dockerfilepath.html">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group form-group-sm">
                        <label class="col-sm-3 control-label">
                            CWL Descriptor:
                        </label>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" name="cwl_path" [(ngModel)]="version.cwl_path" ng-minlength="3" ng-maxlength="128" ng-pattern="/^\/([^\\\/\?\:\*\|\<\>]+\/)*[^\\\/\?\:\*\|\<\>]+\.(cwl|yaml|yml)/i" ng-required="!(tagObj.cwl_path.length || tagObj.wdl_path.length)"  title="Relative path to the CWL Descriptor in the Git repository." placeholder="e.g. /Dockstore.cwl" [disabled]="!editMode" />
                            <div class="form-error-messages" ng-messages="tagEditorForm.cwl_path.$error">
                                <div ng-messages-include="templates/validation/tags/descriptorpath.html">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group form-group-sm">
                        <label class="col-sm-3 control-label">
                            WDL Descriptor:
                        </label>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" name="wdl_path" [(ngModel)]="version.wdl_path" ng-minlength="3" ng-maxlength="128" ng-pattern="/^\/([^\\\/\?\:\*\|\<\>]+\/)*[^\\\/\?\:\*\|\<\>]+\.wdl$/i" ng-required="!(tagObj.cwl_path.length || tagObj.wdl_path.length)"  title="Relative path to the WDL Descriptor in the Git repository." placeholder="e.g. /Dockstore.wdl" [disabled]="!editMode" />
                            <div class="form-error-messages" ng-messages="tagEditorForm.wdl_path.$error">
                                <div ng-messages-include="templates/validation/tags/descriptorpath.html">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group form-group-sm">
                        <label class="col-sm-3 control-label">
                            CWL Test Parameter File(s):
                        </label>
                        <div class="col-sm-9 test_parameter_div" ng-repeat="item in cwlItems track by $index" ng-class="$first ? '' : 'col-sm-offset-3'">
                            <input type="text" class="form-control" name="cwl_test_parameter_file_{{$index}}" ng-model="cwlItems[$index]" ng-minlength="3" ng-maxlength="128" ng-pattern="/^\/([^\\\/\?\:\*\|\<\>]+\/)*[^\\\/\?\:\*\|\<\>]+\.(json|yml|yaml)$/i" title="Relative path to a CWL Test Parameter File in the Git repository." placeholder="e.g. /test.cwl.json" [disabled]="!editMode" ng-class="editMode ? 'test_parameter_input' : ''" />
                            <button title="Remove CWL test parameter file" type="button" class="btn btn-danger test_parameter_remove_button" ng-hide="!editMode" ng-click="removeTestParameterFile($index, 'CWL')">
                                <span class="glyphicon glyphicon-minus"></span>
                            </button>
                            <div class="form-error-messages" ng-messages="tagEditorForm['cwl_test_parameter_file_' + $index].$error" ng-if="tagEditorForm['cwl_test_parameter_file_' + $index].$touched">
                                <div ng-messages-include="templates/validation/containers/testparameterfile.html">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <button title="Add CWL test parameter file" type="button" class="btn btn-success test_parameter_add_button" ng-click="addTestParameterFile('CWL')" ng-hide="!editMode" [disabled]="hasBlankPath('CWL')">
                            <span class="glyphicon glyphicon-plus"></span>
                        </button>
                    </div>
                    <div class="form-group form-group-sm" style="clear:both;">
                        <label class="col-sm-3 control-label">
                            WDL Test Parameter File(s):
                        </label>
                        <div class="col-sm-9 test_parameter_div" ng-repeat="item in wdlItems track by $index" ng-class="$first ? '' : 'col-sm-offset-3'">
                            <input type="text" class="form-control" name="wdl_test_parameter_file_{{$index}}" ng-model="wdlItems[$index]" ng-minlength="3" ng-maxlength="128" ng-pattern="/^\/([^\\\/\?\:\*\|\<\>]+\/)*[^\\\/\?\:\*\|\<\>]+\.(json|yml|yaml)$/i" title="Relative path to a WDL Test Parameter File in the Git repository." placeholder="e.g. /test.wdl.json" [disabled]="!editMode" ng-class="editMode ? 'test_parameter_input' : ''" />
                            <button title="Remove WDL test parameter file" type="button" class="btn btn-danger test_parameter_remove_button" ng-hide="!editMode" ng-click="removeTestParameterFile($index, 'WDL')">
                                <span class="glyphicon glyphicon-minus"></span>
                            </button>
                            <div class="form-error-messages" ng-messages="tagEditorForm['wdl_test_parameter_file_' + $index].$error" ng-if="tagEditorForm['wdl_test_parameter_file_' + $index].$touched">
                                <div ng-messages-include="templates/validation/containers/testparameterfile.html">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <button title="Add WDL test parameter file" type="button" class="btn btn-success test_parameter_add_button" ng-click="addTestParameterFile('WDL')" ng-hide="!editMode" [disabled]="hasBlankPath('WDL')">
                            <span class="glyphicon glyphicon-plus"></span>
                        </button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </form>
            <!--<table id="format" class="table">
                    <tbody>
                        <tr>
                            <th>version version</th>
                            <td>
                                {{ version.name }}
                            </td>
                        </tr>
                        <tr>
                            <th>Git Reference</th>
                            <td>
                                {{ version.reference }}
                            </td>
                        </tr>
                        <tr>
                            <th>Image ID</th>
                            <td>
                                {{ version.image_id }}
                            </td>
                        </tr>
                        <tr>
                            <th>Dockerfile</th>
                            <td>
                                {{ version.dockerfile_path }}
                            </td>
                        </tr>
                        <tr>
                            <th>CWL Descriptor</th>
                            <td>
                                {{ version.cwl_path }}
                            </td>
                        </tr>
                        <tr>
                            <th>WDL Descriptor</th>
                            <td>
                                {{ version.wdl_path }}
                            </td>
                        </tr>
                        <tr>
                            <th>CWL Test Parameter File(s)</th>
                            <td>
                                {{ version.wdl_path }}
                            </td>
                        </tr>
                        <tr>
                            <th>Automated</th>
                            <td>
                                {{ version.automated ? 'Yes' : 'No' }}
                            </td>
                        </tr>
                        <tr>
                            <th>Image Size</th>
                            <td>
                                {{ getSizeString(version.size) }}
                            </td>
                        </tr>
                        <tr>
                            <th>Last Modified</th>
                            <td>
                                {{ getDateTimeMessage(version.last_modified) }}
                            </td>
                        </tr>
                        <tr>
                            <th>Valid</th>
                            <td>
                                {{ version.valid ? 'Yes' : 'No' }}
                            </td>
                        </tr>
                    </tbody>
                </table>-->
        </div>
    </div>
</div>
