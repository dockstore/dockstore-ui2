<button mat-raised-button [matMenuTriggerFor]="menu">{{ this.partner }}</button>
<mat-menu #menu="matMenu" xPosition="before" yPosition="below">
  <div class="px-4" fxLayout="column" fxLayoutAlign="center start">
    <p>Please choose a well-known server to launch on, or specify your own.</p>
    <mat-radio-group
      fxLayout="column"
      fxLayoutAlign="center start"
      name="launchWithUrl"
      [(ngModel)]="presetLaunchWith"
      (click)="$event.stopPropagation()"
    >
      <mat-radio-button
        *ngFor="let instance of cloudInstances | filterCloudInstances: languagePartner"
        name="launchWithUrl"
        value="{{ instance.url }}"
        [checked]="this.defaultLaunchWith === instance.url"
      >
        <span class="normal-font-weight"> {{ instance.displayName }} </span>
      </mat-radio-button>
      <ng-container *ngIf="user">
        <!--     Uncomment when we want to get the users custom cloud instances-->
        <!--      <mat-radio-button-->
        <!--        *ngFor="let usersInstance of usersCloudInstances | filterCloudInstances: languagePartner"-->
        <!--        name="launchWithUrl"-->
        <!--        value="{{ usersInstance.url }}"-->
        <!--        [checked]="this.defaultLaunchWith === usersInstance.url"-->
        <!--      >-->
        <!--        {{ usersInstance.displayName }} (Custom)-->
        <!--      </mat-radio-button>-->
        <mat-radio-button value="other">
          <mat-form-field color="accent">
            <input
              matInput
              placeholder="Specify a url..."
              [(ngModel)]="customLaunchWith"
              (ngModelChange)="presetLaunchWith = 'other'"
              name="something"
            />
          </mat-form-field>
        </mat-radio-button>
      </ng-container>
    </mat-radio-group>
  </div>
  <div class="px-4" fxLayout="row" fxLayoutAlign="end end">
    <button mat-button class="view-button" color="accent" (click)="closeMatMenu()">Cancel</button>
    <a
      mat-raised-button
      class="view-button"
      target="_blank"
      rel="noopener"
      [attr.href]="launchWith.url + appendToLaunchUrl"
      color="accent"
      [disabled]="this.presetLaunchWithOption === 'other' && (customLaunchWithOption == null || customLaunchWithOption === '')"
      (click)="selectDefault()"
    >
      Launch
    </a>
  </div>
</mat-menu>
