<h1 mat-dialog-title>Manage DOIs</h1>
<mat-dialog-content>
  <p>
    A Digital Object Identifier (DOI) allows a {{ entryTypeMetadata.term }} version to be easily cited in publications. There are two types
    of DOIs:
  </p>
  <ul>
    <li><strong>Version DOI:</strong> represents a specific version.</li>
    <li><strong>Concept DOI:</strong> represents all versions and resolves to the latest one.</li>
  </ul>
  <mat-card *ngIf="!doiInfoMap.size" class="alert alert-info mat-elevation-z mt-3" role="alert" data-cy="no-metrics-banner">
    <mat-icon class="alert-info-icon">info</mat-icon> This {{ entryTypeMetadata.term }} has no DOIs.
  </mat-card>
  <p *ngIf="doiInfoMap.size">Select which DOI to display publicly:</p>
  <mat-radio-group [(ngModel)]="selectedOption" aria-label="Select an option">
    <div fxLayout="column" fxLayoutGap="1rem">
      <mat-card *ngFor="let doiInfo of doiInfoMap | keyvalue">
        <mat-radio-button [value]="doiInfo.key" class="w-100">
          <div>
            <img
              *ngIf="doiInfo.key === DoiInitiatorEnum.DOCKSTORE"
              class="site-icons-small-height pr-2"
              src="../../../assets/images/dockstore/logo.png"
              alt="small Dockstore logo"
              matTooltip="This DOI was automatically created by Dockstore"
            />
            <img
              *ngIf="doiInfo.key === DoiInitiatorEnum.GITHUB"
              class="pr-2"
              src="../../../assets/images/registries/GITHUB.svg"
              alt="small GitHub logo"
              matTooltip="This DOI was created via Zenodo's integration with GitHub"
            />
            <mat-icon *ngIf="doiInfo.key === DoiInitiatorEnum.USER" class="pr-2 primary-3" matTooltip="This DOI was created by you"
              >account_circle</mat-icon
            >
            <strong>{{ doiInfo.key | titlecase }}</strong>
          </div>
          <div *ngIf="doiInfo.key === DoiInitiatorEnum.USER" class="size-small gray-caption">
            Manually generated by the user in the Dockstore UI.
          </div>
          <div *ngIf="doiInfo.key === DoiInitiatorEnum.DOCKSTORE" class="size-small gray-caption">
            Automatically generated by Dockstore for valid tags belonging to published {{ entryTypeMetadata.termPlural }}.
          </div>
          <div *ngIf="doiInfo.key === DoiInitiatorEnum.GITHUB" class="size-small gray-caption">
            Generated by Zenodo's integration with GitHub.
          </div>
          <span class="mr-4">
            <span>Version DOI: </span>
            <a
              *ngIf="doiInfo.value.versionDoi"
              [href]="'https://doi.org/' + doiInfo.value.versionDoi.name"
              data-cy="info-tab-DOI-badge"
              matTooltip="Click to view this version's DOI entry information."
              target="_blank"
              rel="noopener noreferrer"
              ><img src="{{ zenodoUrl }}/badge/DOI/{{ doiInfo.value.versionDoi.name }}.svg" alt="{{ doiInfo.value.versionDoi.name }}"
            /></a>
            <span *ngIf="!doiInfo.value.versionDoi">n/a</span>
          </span>
          <span>
            <span>Concept DOI: </span>
            <a
              [href]="'https://doi.org/' + doiInfo.value.conceptDoi.name"
              data-cy="info-tab-DOI-badge"
              matTooltip="Click to view this version's DOI entry information."
              target="_blank"
              rel="noopener noreferrer"
              ><img src="{{ zenodoUrl }}/badge/DOI/{{ doiInfo.value.conceptDoi.name }}.svg" alt="{{ doiInfo.value.conceptDoi.name }}"
            /></a>
          </span>
        </mat-radio-button>
      </mat-card>
    </div>
  </mat-radio-group>
</mat-dialog-content>
<div mat-dialog-actions class="pull-right">
  <button mat-button mat-dialog-close class="secondary-1" data-cy="topicCancelButton" cdkFocusInitial>Cancel</button>
  <button
    mat-raised-button
    mat-dialog-close
    data-cy="topicSaveButton"
    class="accent-1-dark-btn mat-elevation-z"
    (click)="saveDoiSelection()"
  >
    Save
  </button>
</div>
