<app-loading [loading]="loading$ | async">
  <div *ngIf="!(events$ | async) || (events$ | async).length === 0">
    <mat-card class="alert alert-info mx-1" role="alert">
      <mat-icon>info</mat-icon> No events found. Star entries or organizations to see events for them. Read
      <a
        href="https://docs.dockstore.org/en/develop/end-user-topics/starring.html#starring-tools-and-workflows"
        target="_blank"
        rel="noopener noreferrer"
        >https://docs.dockstore.org/en/develop/end-user-topics/starring.html#starring-tools-and-workflows</a
      >
      to learn how to star entries.</mat-card
    >
  </div>
  <mat-card>
    <div fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap="1rem">
      <div *ngFor="let event of events$ | async; last as last">
        <div [ngSwitch]="event?.type">
          <div *ngSwitchCase="EventType.ADDVERSIONTOENTRY">
            <strong>{{ event.initiatorUser?.username }} </strong> has created the {{ event.version?.referenceType | lowercase }}
            <strong>{{ event.version?.name }}</strong> in entry
            <strong>{{ (event?.tool | entryToDisplayName) || (event?.workflow | entryToDisplayName) }}</strong>
            <div class="subtitle">{{ 'on ' + (event.dbCreateDate | date: 'medium') }}</div>
            <mat-divider *ngIf="!last"></mat-divider>
          </div>
          <div *ngSwitchCase="EventType.CREATECOLLECTION">
            <strong>{{ event.initiatorUser?.username }}</strong> has created the collection
            <strong>{{ event.collection?.name }} </strong> in organization
            <strong>{{ event.organization?.displayName }}</strong>
            <div class="subtitle">{{ 'on ' + (event.dbCreateDate | date: 'medium') }}</div>
            <mat-divider *ngIf="!last"></mat-divider>
          </div>
          <div *ngSwitchCase="EventType.ADDTOCOLLECTION">
            <strong>{{ event.initiatorUser.username }} </strong> has added the entry
            <strong>{{ (event?.tool | entryToDisplayName) || (event?.workflow | entryToDisplayName) }}</strong>
            to the collection <strong>{{ event.collection?.name }}</strong> in organization
            <strong>{{ event.organization?.displayName }}</strong>
            <div class="subtitle">{{ 'on ' + (event.dbCreateDate | date: 'medium') }}</div>
            <mat-divider *ngIf="!last"></mat-divider>
          </div>
        </div>
      </div>
    </div>
  </mat-card>
</app-loading>
